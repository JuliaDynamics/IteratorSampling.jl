<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Introduction · StreamSampling.jl</title><meta name="title" content="Introduction · StreamSampling.jl"/><meta property="og:title" content="Introduction · StreamSampling.jl"/><meta property="twitter:title" content="Introduction · StreamSampling.jl"/><meta name="description" content="Documentation for StreamSampling.jl."/><meta property="og:description" content="Documentation for StreamSampling.jl."/><meta property="twitter:description" content="Documentation for StreamSampling.jl."/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>StreamSampling.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Introduction</a><ul class="internal"><li><a class="tocitem" href="#Introduction"><span>Introduction</span></a></li><li><a class="tocitem" href="#Brief-overview-of-the-functionalities"><span>Brief overview of the functionalities</span></a></li><li><a class="tocitem" href="#Benchmark"><span>Benchmark</span></a></li></ul></li><li><a class="tocitem" href="api/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Introduction</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Introduction</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaDynamics/StreamSampling.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaDynamics/StreamSampling.jl/blob/main/docs/src/index.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h2 id="Introduction"><a class="docs-heading-anchor" href="#Introduction">Introduction</a><a id="Introduction-1"></a><a class="docs-heading-anchor-permalink" href="#Introduction" title="Permalink"></a></h2><p>The scope of this package is providing general methods to sample from any stream in a single pass through the data, even when the number of items contained in the stream is unknown.</p><p>This has some advantages over other sampling procedures:</p><ul><li>If the iterable is lazy, the memory required grows in relation to the size of the sample, instead of the all population.</li><li>The sample collected is a random sample of the portion of the stream seen thus far at any point of the sampling process.</li><li>In some cases, sampling with the techniques implemented in this library can bring considerable performance gains, since the population of items doesn&#39;t need to be previously stored in memory.</li></ul><h2 id="Brief-overview-of-the-functionalities"><a class="docs-heading-anchor" href="#Brief-overview-of-the-functionalities">Brief overview of the functionalities</a><a id="Brief-overview-of-the-functionalities-1"></a><a class="docs-heading-anchor-permalink" href="#Brief-overview-of-the-functionalities" title="Permalink"></a></h2><p>The <a href="api/#StreamSampling.itsample"><code>itsample</code></a> function allows to consume all the stream at once and return the sample collected:</p><pre><code class="language-julia hljs">julia&gt; using StreamSampling

julia&gt; st = 1:100;

julia&gt; itsample(st, 5)
5-element Vector{Int64}:
  9
 15
 52
 96
 91</code></pre><p>In some cases, one needs to control the updates the <a href="api/#StreamSampling.ReservoirSample"><code>ReservoirSample</code></a> will be subject to. In this case you can simply use the <a href="api/#StreamSampling.update!"><code>update!</code></a> function to fit new values in the reservoir:</p><pre><code class="language-julia hljs">julia&gt; using StreamSampling

julia&gt; rs = ReservoirSample(Int, 5);

julia&gt; for x in 1:100
           update!(rs, x)
       end

julia&gt; value(rs)
5-element Vector{Int64}:
  7
  9
 20
 49
 74</code></pre><p>Consult the <a href="https://juliadynamics.github.io/StreamSampling.jl/stable/api/">API page</a> for more information on these and other functionalities.</p><h2 id="Benchmark"><a class="docs-heading-anchor" href="#Benchmark">Benchmark</a><a id="Benchmark-1"></a><a class="docs-heading-anchor-permalink" href="#Benchmark" title="Permalink"></a></h2><p>As stated in the first section, using these sampling techniques can bring down considerably the memory usage of the program,  but there are cases where they are also more time efficient, as demostrated below with a comparison with the  equivalent methods of <code>StatsBase.sample</code>:</p><pre><code class="language-julia hljs">julia&gt; using StreamSampling

julia&gt; using BenchmarkTools, Random, StatsBase

julia&gt; rng = Xoshiro(42);

julia&gt; iter = Iterators.filter(x -&gt; x != 10, 1:10^7);

julia&gt; wv(el) = 1.0

julia&gt; @btime itsample($rng, $iter, 10^4, algRSWRSKIP);
  11.744 ms (5 allocations: 156.39 KiB)

julia&gt; @btime sample($rng, collect($iter), 10^4; replace=true);
  131.933 ms (20 allocations: 146.91 MiB)

julia&gt; @btime itsample($rng, $iter, 10^4, algL);
  10.260 ms (3 allocations: 78.22 KiB)

julia&gt; @btime sample($rng, collect($iter), 10^4; replace=false);
  132.069 ms (27 allocations: 147.05 MiB)

julia&gt; @btime itsample($rng, $iter, $wv, 10^4, algWRSWRSKIP);
  32.278 ms (18 allocations: 547.34 KiB)

julia&gt; @btime sample($rng, collect($iter), Weights($wv.($iter)), 10^4; replace=true);
  348.220 ms (49 allocations: 675.21 MiB)

julia&gt; @btime itsample($rng, $iter, $wv, 10^4, algAExpJ);
  39.965 ms (11 allocations: 234.78 KiB)

julia&gt; @btime sample($rng, collect($iter), Weights($wv.($iter)), 10^4; replace=false);
  306.039 ms (43 allocations: 370.19 MiB)</code></pre></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="api/">API »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.4.0 on <span class="colophon-date" title="Saturday 20 April 2024 01:30">Saturday 20 April 2024</span>. Using Julia version 1.10.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
